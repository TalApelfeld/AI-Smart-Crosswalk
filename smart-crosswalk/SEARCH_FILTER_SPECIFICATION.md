# ğŸ” ××¡××š ××™×¤×™×•×Ÿ - ××¢×¨×›×ª ×—×™×¤×•×© ×•×¡×™× ×•×Ÿ

## ×ª××¨×™×š: 23 ×™× ×•××¨ 2026

---

## ğŸ“‹ ×¡×§×™×¨×” ×›×œ×œ×™×ª

××¡××š ×–×” ××¤×¨×˜ ××ª ×“×¨×™×©×•×ª ×”××¢×¨×›×ª ×œ×—×™×¤×•×©, ×¡×™× ×•×Ÿ ×•× ×™×•×•×˜ ×‘××¢×¨×›×ª × ×™×”×•×œ ××¢×‘×¨×™ ×—×¦×™×™×” ×—×›××™×.

---

## ğŸ¯ ××˜×¨×•×ª ×”××¢×¨×›×ª

1. **×—×™×¤×•×© ×—×“-×¢×¨×›×™** - ×–×™×”×•×™ ××¢×‘×¨ ×—×¦×™×™×” ×¡×¤×¦×™×¤×™ ×‘×¦×•×¨×” ××”×™×¨×” ×•××“×•×™×§×ª
2. **×”×™×¡×˜×•×¨×™×” ××œ××”** - ×”×¦×’×ª ×›×œ ×”××™×¨×•×¢×™× ×”××¡×•×›× ×™× ×œ×›×œ ××¢×‘×¨ ×—×¦×™×™×”
3. **×¡×™× ×•×Ÿ ××ª×§×“×** - ×¡×™× ×•×Ÿ ×”×ª×¨××•×ª ×œ×¤×™ ×ª××¨×™×š ×•×¤×¨××˜×¨×™× × ×•×¡×¤×™×
4. **× ×™×•×•×˜ ××™× ×˜×•××™×˜×™×‘×™** - ××¢×‘×¨ ×—×œ×§ ×‘×™×Ÿ ×“×¤×™× ×¢× ×©××™×¨×ª ×”×§×©×¨

---

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×”

### 1. ×“×£ ×¨××©×™ ××•×¨×—×‘ (Dashboard)

#### 1.1 ×¡×¨×’×œ ×—×™×¤×•×© ×’×œ×•×‘×œ×™
**××™×§×•×:** ×‘×¨××© ×”×“×£, ××¢×œ ×›×œ ×”×ª×•×›×Ÿ

**×ª×›×•× ×•×ª:**
- ×©×“×” ×—×™×¤×•×© ×¨×—×‘ ×•×‘×•×œ×˜
- ×—×™×¤×•×© ×‘×–××Ÿ ×××ª (auto-complete)
- ×ª××™×›×” ×‘×—×™×¤×•×© ×œ×¤×™:
  - ×©× ×¨×—×•×‘ (primary)
  - ×¢×™×¨ + ×¨×—×•×‘
  - ××–×”×” ××¢×‘×¨ ×—×¦×™×™×” (ID)
  - ××¡×¤×¨ ×‘×™×ª

**×”×ª× ×”×’×•×ª:**
- ×”×§×œ×“×” ×©×œ 2+ ×ª×•×•×™× ××¤×¢×™×œ×” ×—×™×¤×•×©
- ×”×¦×’×ª ×ª×•×¦××•×ª ×‘×ª×¤×¨×™×˜ × ×¤×ª×— (dropdown)
- ×œ×—×™×¦×” ×¢×œ ×ª×•×¦××” ×× ×•×•×˜×ª ×œ×“×£ ××¢×‘×¨ ×”×—×¦×™×™×”
- ×ª××™×›×” ×‘××§×œ×“×ª (Enter, Arrows, Escape)

**×“×•×’××ª UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”  Search crosswalks...                         â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸš¦ Dizengoff 50, Tel Aviv                   â”‚ â”‚
â”‚  â”‚ ğŸš¦ Dizengoff 123, Tel Aviv                  â”‚ â”‚
â”‚  â”‚ ğŸš¦ Dizengoff 234, Tel Aviv                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. ×“×£ ××¢×‘×¨ ×—×¦×™×™×” (Crosswalk Details Page)

#### 2.1 ××‘× ×” ×”×“×£

**URL Pattern:** `/crosswalks/:id`

**×¡×§×©× ×™×:**
1. **×›×•×ª×¨×ª** - ×¤×¨×˜×™ ××¢×‘×¨ ×”×—×¦×™×™×”
2. **×¡×˜×˜×™×¡×˜×™×§×•×ª** - ×¡×™×›×•× ××™×¨×•×¢×™×
3. **×¡×™× ×•×Ÿ** - ×¤×™×œ×˜×¨×™× ×œ××™×¨×•×¢×™×
4. **×”×™×¡×˜×•×¨×™×”** - ×¨×©×™××ª ×›×œ ×”××™×¨×•×¢×™×

#### 2.2 ×¤×¨×˜×™ ××¢×‘×¨ ×”×—×¦×™×™×”
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš¦ Dizengoff 50, Tel Aviv                      â”‚
â”‚                                                 â”‚
â”‚ ğŸ“· Camera: Active    ğŸ’¡ LED: #A1B2C3           â”‚
â”‚ ğŸ“… Created: Jan 15, 2026                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3 ×¡×˜×˜×™×¡×˜×™×§×•×ª ××™×¨×•×¢×™×
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Total Events â”‚   High       â”‚   Medium     â”‚    Low       â”‚
â”‚     156      â”‚    42        â”‚     78       â”‚     36       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.4 ×¡×¨×’×œ ×¡×™× ×•×Ÿ
**×¤×™×œ×˜×¨×™× ×–××™× ×™×:**

1. **×˜×•×•×— ×ª××¨×™×›×™×** (Date Range)
   - From Date (×ª××¨×™×š ×”×ª×—×œ×”)
   - To Date (×ª××¨×™×š ×¡×™×•×)
   - Presets: Today, Last 7 Days, Last 30 Days, All Time

2. **×¨××ª ×¡×›× ×”** (Danger Level)
   - All / Low / Medium / High

3. **××™×•×Ÿ** (Sort By)
   - Newest First (default)
   - Oldest First
   - Danger Level (High to Low)

**×“×•×’××ª UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Filters:                                               â”‚
â”‚                                                         â”‚
â”‚  [ğŸ“… Last 7 Days â–¼]  [âš ï¸ All Levels â–¼]  [ğŸ”½ Newest â–¼] â”‚
â”‚                                                         â”‚
â”‚  From: [DD/MM/YYYY]    To: [DD/MM/YYYY]    [Apply]    â”‚
â”‚                                            [Clear]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.5 ×¨×©×™××ª ××™×¨×•×¢×™× (Events History)

**××‘× ×” ×›×¨×˜×™×¡ ××™×¨×•×¢:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš¨ High Danger Alert                    Jan 22, 14:35  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚                 â”‚   Detected: Jan 22, 2026 14:35   â”‚
â”‚  â”‚   [Image        â”‚   Danger Level: High              â”‚
â”‚  â”‚   Placeholder]  â”‚   Camera: #A1B2C3                 â”‚
â”‚  â”‚                 â”‚   Alert ID: 65f3a2...             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                         â”‚
â”‚  [View Details]  [Download Image]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**×× ××™×Ÿ ×ª××•× ×”:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚
â”‚    ğŸ“·       â”‚
â”‚  No Image   â”‚
â”‚  Available  â”‚
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ×“×¨×™×©×•×ª ×˜×›× ×™×•×ª - Backend

### 3.1 API Endpoints ×—×“×©×™×

#### `GET /api/crosswalks/search`
**×ª×™××•×¨:** ×—×™×¤×•×© ××¢×‘×¨×™ ×—×¦×™×™×”

**Query Parameters:**
- `q` (string, required) - ××—×¨×•×–×ª ×”×—×™×¤×•×©
- `limit` (number, optional) - ××§×¡×™××•× ×ª×•×¦××•×ª (default: 10)

**Response:**
```json
{
  "success": true,
  "count": 3,
  "data": [
    {
      "_id": "65f3a2...",
      "location": {
        "city": "Tel Aviv",
        "street": "Dizengoff",
        "number": "50"
      },
      "cameraId": { "_id": "...", "status": "active" },
      "ledId": { "_id": "..." }
    }
  ]
}
```

**×—×™×¤×•×© ××©×•×¤×¨:**
- Case-insensitive
- Partial matching (×—×™×¤×•×© ×—×œ×§×™)
- ×—×™×¤×•×© ×‘×›×œ ×”×©×“×•×ª: `city`, `street`, `number`
- ×©×™××•×© ×‘-MongoDB text index ××• regex

**×“×•×’××ª ××™××•×©:**
```javascript
async search(query) {
  const searchRegex = new RegExp(query, 'i');
  
  return Crosswalk.find({
    $or: [
      { 'location.street': searchRegex },
      { 'location.city': searchRegex },
      { 'location.number': searchRegex }
    ]
  })
  .populate('cameraId')
  .populate('ledId')
  .limit(10);
}
```

---

#### `GET /api/crosswalks/:id/alerts`
**×ª×™××•×¨:** ×§×‘×œ×ª ×”×™×¡×˜×•×¨×™×™×ª ×”×ª×¨××•×ª ×œ××¢×‘×¨ ×—×¦×™×™×” ×¡×¤×¦×™×¤×™

**Query Parameters:**
- `startDate` (ISO date, optional) - ×ª××¨×™×š ×”×ª×—×œ×”
- `endDate` (ISO date, optional) - ×ª××¨×™×š ×¡×™×•×
- `dangerLevel` (string, optional) - LOW/MEDIUM/HIGH
- `sortBy` (string, optional) - 'newest' (default) / 'oldest' / 'danger'
- `limit` (number, optional) - default: 50
- `page` (number, optional) - for pagination

**Response:**
```json
{
  "success": true,
  "crosswalk": {
    "_id": "65f3a2...",
    "location": {
      "city": "Tel Aviv",
      "street": "Dizengoff",
      "number": "50"
    }
  },
  "stats": {
    "total": 156,
    "high": 42,
    "medium": 78,
    "low": 36
  },
  "alerts": [
    {
      "_id": "65f3b1...",
      "timestamp": "2026-01-22T14:35:00Z",
      "dangerLevel": "HIGH",
      "detectionPhoto": {
        "url": "https://..."
      },
      "createdAt": "2026-01-22T14:35:02Z"
    }
  ],
  "pagination": {
    "currentPage": 1,
    "totalPages": 4,
    "totalAlerts": 156,
    "hasMore": true
  }
}
```

**××™××•×©:**
```javascript
async getAlertsByCrosswalk(crosswalkId, filters = {}) {
  const query = { crosswalkId };
  
  // Date range filter
  if (filters.startDate || filters.endDate) {
    query.timestamp = {};
    if (filters.startDate) query.timestamp.$gte = new Date(filters.startDate);
    if (filters.endDate) query.timestamp.$lte = new Date(filters.endDate);
  }
  
  // Danger level filter
  if (filters.dangerLevel) {
    query.dangerLevel = filters.dangerLevel;
  }
  
  // Sorting
  let sort = { timestamp: -1 }; // newest first
  if (filters.sortBy === 'oldest') sort = { timestamp: 1 };
  if (filters.sortBy === 'danger') sort = { dangerLevel: -1, timestamp: -1 };
  
  // Pagination
  const page = filters.page || 1;
  const limit = filters.limit || 50;
  const skip = (page - 1) * limit;
  
  const [alerts, total, stats] = await Promise.all([
    Alert.find(query).sort(sort).skip(skip).limit(limit),
    Alert.countDocuments(query),
    Alert.aggregate([
      { $match: { crosswalkId: mongoose.Types.ObjectId(crosswalkId) } },
      { $group: {
          _id: '$dangerLevel',
          count: { $sum: 1 }
        }
      }
    ])
  ]);
  
  return { alerts, total, stats, page, totalPages: Math.ceil(total / limit) };
}
```

---

#### `GET /api/crosswalks/:id/stats`
**×ª×™××•×¨:** ×¡×˜×˜×™×¡×˜×™×§×•×ª ×¢×‘×•×¨ ××¢×‘×¨ ×—×¦×™×™×”

**Response:**
```json
{
  "success": true,
  "data": {
    "total": 156,
    "byDangerLevel": {
      "HIGH": 42,
      "MEDIUM": 78,
      "LOW": 36
    },
    "last24Hours": 5,
    "last7Days": 23,
    "last30Days": 89
  }
}
```

---

## ğŸ¨ ×“×¨×™×©×•×ª Frontend

### 4.1 ×§×•××¤×•× × ×˜×™× ×—×“×©×™×

#### `SearchBar.jsx`
**×ª×™××•×¨:** ×¡×¨×’×œ ×—×™×¤×•×© ×’×œ×•×‘×œ×™ ×¢× auto-complete

**Props:**
```javascript
{
  placeholder: string,
  onSelect: (crosswalk) => void,
  autoFocus: boolean
}
```

**State:**
- `searchQuery` - ××—×¨×•×–×ª ×”×—×™×¤×•×©
- `results` - ×ª×•×¦××•×ª ×”×—×™×¤×•×©
- `loading` - ××¦×‘ ×˜×¢×™× ×”
- `showDropdown` - ×”×¦×’×ª ×ª×¤×¨×™×˜
- `selectedIndex` - ××™× ×“×§×¡ × ×‘×—×¨ (×œ××§×œ×“×ª)

**Features:**
- Debounce (300ms) ×œ×¤× ×™ ×©×œ×™×—×ª ×‘×§×©×”
- Loading spinner ×‘×–××Ÿ ×—×™×¤×•×©
- Highlight ×©×œ ×˜×§×¡×˜ ××ª××™×
- Keyboard navigation
- Click outside to close

---

#### `DateRangePicker.jsx`
**×ª×™××•×¨:** ×‘×—×™×¨×ª ×˜×•×•×— ×ª××¨×™×›×™×

**Props:**
```javascript
{
  startDate: Date,
  endDate: Date,
  onChange: ({ startDate, endDate }) => void,
  presets: Array<{label, getValue}>,
  maxDate: Date
}
```

**Presets:**
- Today
- Last 7 Days
- Last 30 Days
- This Month
- Last Month
- All Time

---

#### `FilterBar.jsx` (××•×¨×—×‘)
**×ª×™××•×¨:** ×¡×¨×’×œ ×¤×™×œ×˜×¨×™× ×¢×‘×•×¨ ×“×£ ××¢×‘×¨ ×—×¦×™×™×”

**Props:**
```javascript
{
  dateRange: { startDate, endDate },
  dangerLevel: string,
  sortBy: string,
  onFilterChange: (filters) => void,
  onClear: () => void
}
```

---

#### `AlertHistoryCard.jsx`
**×ª×™××•×¨:** ×›×¨×˜×™×¡ ××™×¨×•×¢ ×‘×”×™×¡×˜×•×¨×™×”

**Props:**
```javascript
{
  alert: Alert,
  onViewDetails: (alert) => void,
  onDownloadImage: (alert) => void
}
```

**Features:**
- Placeholder ×ª××•× ×” ×× ××™×Ÿ URL
- ×ª×¦×•×’×ª ×ª××¨×™×š ×•×©×¢×” ×‘×¤×•×¨××˜ ×§×¨×™×
- Badge ×œ×¨××ª ×¡×›× ×”
- ×›×¤×ª×•×¨×™ ×¤×¢×•×œ×”

---

### 4.2 ×“×¤×™× ×—×“×©×™×/××¢×•×“×›× ×™×

#### `CrosswalkDetailsPage.jsx` (×—×“×©)
**URL:** `/crosswalks/:id`

**Sections:**
1. Header - ×¤×¨×˜×™ ××¢×‘×¨ ×—×¦×™×™×”
2. Stats - ×¡×˜×˜×™×¡×˜×™×§×•×ª
3. Filters - ×¡×™× ×•×Ÿ ××™×¨×•×¢×™×
4. History - ×¨×©×™××ª ××™×¨×•×¢×™× + pagination

**State:**
```javascript
{
  crosswalk: Crosswalk,
  alerts: Alert[],
  stats: Stats,
  filters: {
    dateRange: { startDate, endDate },
    dangerLevel: string,
    sortBy: string
  },
  pagination: {
    currentPage: number,
    totalPages: number,
    hasMore: boolean
  },
  loading: boolean,
  error: string
}
```

---

#### `Dashboard.jsx` (××¢×•×“×›×Ÿ)
**×”×•×¡×¤×•×ª:**
- SearchBar component ×œ××¢×œ×”
- ×§×™×©×•×¨×™× ×œ××¢×‘×¨×™ ×—×¦×™×™×” ×”×›×™ ×¤×¢×™×œ×™×

---

### 4.3 Routing

**× ×ª×™×‘×™× ×—×“×©×™×:**
```javascript
<Routes>
  <Route path="/" element={<Dashboard />} />
  <Route path="/alerts" element={<Alerts />} />
  <Route path="/crosswalks" element={<Crosswalks />} />
  <Route path="/crosswalks/:id" element={<CrosswalkDetailsPage />} /> {/* NEW */}
</Routes>
```

---

### 4.4 API Client

#### `crosswalks.js` (×¢×“×›×•×Ÿ)
```javascript
export const crosswalksApi = {
  // ... existing methods
  
  // NEW: Search crosswalks
  search: async (query) => {
    return api.get('/crosswalks/search', { params: { q: query } });
  },
  
  // NEW: Get alerts for specific crosswalk
  getAlerts: async (id, filters = {}) => {
    return api.get(`/crosswalks/${id}/alerts`, { params: filters });
  },
  
  // NEW: Get stats for specific crosswalk
  getCrosswalkStats: async (id) => {
    return api.get(`/crosswalks/${id}/stats`);
  }
};
```

---

### 4.5 Custom Hooks

#### `useSearch.js` (×—×“×©)
```javascript
export function useSearch() {
  const [query, setQuery] = useState('');
  const [results, setResults] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  
  const debouncedQuery = useDebounce(query, 300);
  
  useEffect(() => {
    if (debouncedQuery.length >= 2) {
      searchCrosswalks(debouncedQuery);
    } else {
      setResults([]);
    }
  }, [debouncedQuery]);
  
  const searchCrosswalks = async (q) => {
    setLoading(true);
    try {
      const response = await crosswalksApi.search(q);
      setResults(response.data);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };
  
  return { query, setQuery, results, loading, error };
}
```

---

#### `useCrosswalkDetails.js` (×—×“×©)
```javascript
export function useCrosswalkDetails(crosswalkId) {
  const [crosswalk, setCrosswalk] = useState(null);
  const [alerts, setAlerts] = useState([]);
  const [stats, setStats] = useState(null);
  const [filters, setFilters] = useState({
    dateRange: { startDate: null, endDate: null },
    dangerLevel: 'all',
    sortBy: 'newest'
  });
  const [pagination, setPagination] = useState({
    currentPage: 1,
    totalPages: 1,
    hasMore: false
  });
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    fetchData();
  }, [crosswalkId, filters, pagination.currentPage]);
  
  const fetchData = async () => {
    setLoading(true);
    try {
      const [crosswalkRes, alertsRes, statsRes] = await Promise.all([
        crosswalksApi.getById(crosswalkId),
        crosswalksApi.getAlerts(crosswalkId, {
          ...filters,
          page: pagination.currentPage
        }),
        crosswalksApi.getCrosswalkStats(crosswalkId)
      ]);
      
      setCrosswalk(crosswalkRes.data);
      setAlerts(alertsRes.data.alerts);
      setStats(statsRes.data);
      setPagination({
        currentPage: alertsRes.data.pagination.currentPage,
        totalPages: alertsRes.data.pagination.totalPages,
        hasMore: alertsRes.data.pagination.hasMore
      });
    } finally {
      setLoading(false);
    }
  };
  
  const updateFilters = (newFilters) => {
    setFilters({ ...filters, ...newFilters });
    setPagination({ ...pagination, currentPage: 1 }); // Reset to page 1
  };
  
  return {
    crosswalk,
    alerts,
    stats,
    filters,
    updateFilters,
    pagination,
    setPagination,
    loading,
    refetch: fetchData
  };
}
```

---

## ğŸ“± ×–×¨×™××•×ª ××©×ª××© (User Flows)

### Flow 1: ×—×™×¤×•×© ××¢×‘×¨ ×—×¦×™×™×” ××”×“×£ ×”×¨××©×™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User types "Dizen"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SearchBar       â”‚
â”‚  Shows results:  â”‚
â”‚  â€¢ Dizengoff 50  â”‚
â”‚  â€¢ Dizengoff 123 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User clicks "Dizengoff 50"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CrosswalkDetailsPage â”‚
â”‚ /crosswalks/:id      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flow 2: ×¦×¤×™×™×” ×‘×”×™×¡×˜×•×¨×™×” ×¢× ×¡×™× ×•×Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CrosswalkDetailsPage â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User selects "Last 7 Days"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FilterBar        â”‚
â”‚ Updates filters  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ API call with filters
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Alert History      â”‚
â”‚ Shows filtered     â”‚
â”‚ results (23 items) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flow 3: × ×™×•×•×˜ ×‘×™×Ÿ ×“×¤×™×

```
Dashboard â”€â”€[Search]â”€â”€> CrosswalkDetails
    â–²                         â”‚
    â”‚                         â”‚
    â””â”€â”€â”€â”€[Back/Navigate]â”€â”€â”€â”€â”€â”€â”˜
    
Crosswalks List â”€â”€[Click Card]â”€â”€> CrosswalkDetails
    â–²                                  â”‚
    â”‚                                  â”‚
    â””â”€â”€â”€â”€â”€â”€[Back/Navigate]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ ×¢×™×¦×•×‘ ×•×—×•×•×™×™×ª ××©×ª××©

### UX Guidelines

1. **Feedback ××™×™×“×™**
   - Loading states ×‘×›×œ ×¤×¢×•×œ×”
   - Empty states ×‘×¨×•×¨×™×
   - ×”×•×“×¢×•×ª ×©×’×™××” ××¤×•×¨×˜×•×ª

2. **× ×’×™×©×•×ª**
   - Keyboard navigation ××œ×
   - ARIA labels
   - Focus management

3. **Performance**
   - Debouncing ×‘×—×™×¤×•×©
   - Lazy loading ×©×œ ×ª××•× ×•×ª
   - Pagination ×œ×¨×©×™××•×ª ××¨×•×›×•×ª
   - Infinite scroll (××•×¤×¦×™×•× ×œ×™)

4. **Responsive Design**
   - Mobile-first approach
   - Touch-friendly targets
   - Adaptive layouts

---

## ğŸ“Š ××‘× ×™ × ×ª×•× ×™×

### Search Result
```typescript
interface SearchResult {
  _id: string;
  location: {
    city: string;
    street: string;
    number: string;
  };
  cameraId?: Camera;
  ledId?: LED;
  highlightedText?: string; // For search highlighting
}
```

### CrosswalkStats
```typescript
interface CrosswalkStats {
  total: number;
  byDangerLevel: {
    HIGH: number;
    MEDIUM: number;
    LOW: number;
  };
  last24Hours: number;
  last7Days: number;
  last30Days: number;
}
```

### Filters
```typescript
interface AlertFilters {
  dateRange: {
    startDate: Date | null;
    endDate: Date | null;
  };
  dangerLevel: 'all' | 'LOW' | 'MEDIUM' | 'HIGH';
  sortBy: 'newest' | 'oldest' | 'danger';
}
```

---

## ğŸ” ××œ×’×•×¨×™×ª××™ ×—×™×¤×•×©

### Smart Search Algorithm

```javascript
function smartSearch(query, crosswalks) {
  const normalizedQuery = query.toLowerCase().trim();
  
  // Exact match first
  const exactMatches = crosswalks.filter(cw => 
    cw.location.street.toLowerCase() === normalizedQuery ||
    `${cw.location.street} ${cw.location.number}`.toLowerCase() === normalizedQuery
  );
  
  // Partial matches
  const partialMatches = crosswalks.filter(cw =>
    cw.location.street.toLowerCase().includes(normalizedQuery) ||
    cw.location.city.toLowerCase().includes(normalizedQuery) ||
    cw.location.number.includes(normalizedQuery)
  );
  
  // Combine and remove duplicates
  return [...new Set([...exactMatches, ...partialMatches])];
}
```

---

## âš¡ ××•×¤×˜×™××™×–×¦×™×•×ª

### Backend Optimizations

1. **Database Indexes:**
```javascript
// Crosswalk model
crosswalkSchema.index({ 
  'location.street': 'text', 
  'location.city': 'text' 
});

// Alert model  
alertSchema.index({ crosswalkId: 1, timestamp: -1 });
alertSchema.index({ dangerLevel: 1 });
```

2. **Caching:**
- Cache search results ×œ××©×ª××©×™× ××—×•×‘×¨×™×
- Cache stats ×œ××¢×‘×¨×™ ×—×¦×™×™×” ×¤×•×¤×•×œ×¨×™×™×
- TTL: 5 ×“×§×•×ª

3. **Query Optimization:**
- Limit ×ª×•×¦××•×ª ×—×™×¤×•×© ×œ-10
- Projection - ×”×—×–×¨ ×¨×§ ×©×“×•×ª × ×—×•×¦×™×
- Lean queries ×œ××”×™×¨×•×ª

### Frontend Optimizations

1. **Debouncing:** 300ms delay ×‘×—×™×¤×•×©
2. **Memoization:** React.memo ×œ×§×•××¤×•× × ×˜×™×
3. **Lazy Loading:** ×ª××•× ×•×ª ×¢× IntersectionObserver
4. **Virtual Scrolling:** ×œ×¨×©×™××•×ª ××¨×•×›×•×ª ×××•×“

---

## ğŸ§ª ×ª×¨×—×™×©×™ ×‘×“×™×§×”

### Search Tests

| Test Case | Input | Expected Output |
|-----------|-------|-----------------|
| Basic search | "Dizen" | Shows all Dizengoff streets |
| Exact match | "Dizengoff 50" | Shows only Dizengoff 50 |
| Case insensitive | "DIZENGOFF" | Shows all Dizengoff streets |
| Empty query | "" | No results shown |
| No matches | "XYZ123" | "No results found" message |
| Special chars | "Ben-Gurion" | Handles hyphen correctly |

### Filter Tests

| Test Case | Filter | Expected Behavior |
|-----------|--------|-------------------|
| Date range | Last 7 days | Shows only alerts from last week |
| Danger level | HIGH only | Shows only high danger alerts |
| Combined | Last 7 days + HIGH | Shows high danger alerts from last week |
| Clear filters | Click "Clear" | Reset to all alerts |
| No results | Future date range | Shows "No alerts found" |

---

## ğŸ“‹ ×¨×©×™××ª ××©×™××•×ª

### Backend Tasks
- [ ] ×™×¦×™×¨×ª endpoint `GET /api/crosswalks/search`
- [ ] ×™×¦×™×¨×ª endpoint `GET /api/crosswalks/:id/alerts`
- [ ] ×™×¦×™×¨×ª endpoint `GET /api/crosswalks/:id/stats`
- [ ] ×”×•×¡×¤×ª indexes ×œ××¡×“ ×”× ×ª×•× ×™×
- [ ] ××™××•×© ×œ×•×’×™×§×ª ×¡×™× ×•×Ÿ ××ª×§×“××ª
- [ ] ××™××•×© pagination
- [ ] ×‘×“×™×§×•×ª API

### Frontend Tasks
- [ ] ×™×¦×™×¨×ª `SearchBar.jsx` component
- [ ] ×™×¦×™×¨×ª `DateRangePicker.jsx` component
- [ ] ×™×¦×™×¨×ª `AlertHistoryCard.jsx` component
- [ ] ×™×¦×™×¨×ª `CrosswalkDetailsPage.jsx` page
- [ ] ×¢×“×›×•×Ÿ `Dashboard.jsx` ×¢× SearchBar
- [ ] ×™×¦×™×¨×ª `useSearch.js` hook
- [ ] ×™×¦×™×¨×ª `useCrosswalkDetails.js` hook
- [ ] ×¢×“×›×•×Ÿ routing
- [ ] ×¢×“×›×•×Ÿ `crosswalks.js` API client
- [ ] ×‘×“×™×§×•×ª UI/UX

### Design Tasks
- [ ] ×¢×™×¦×•×‘ SearchBar
- [ ] ×¢×™×¦×•×‘ CrosswalkDetailsPage
- [ ] ×¢×™×¦×•×‘ AlertHistoryCard
- [ ] ×¢×™×¦×•×‘ Empty States
- [ ] ×¢×™×¦×•×‘ Loading States
- [ ] Responsive design

---

## ğŸ¯ ×¡×“×¨ ×¢×“×™×¤×•×™×•×ª ××•××œ×¥

### Phase 1: ×—×™×¤×•×© ×‘×¡×™×¡×™ (2-3 ×™××™×)
1. Backend: endpoint ×—×™×¤×•×©
2. Frontend: SearchBar component
3. ××™× ×˜×’×¨×¦×™×” ×‘×“×£ ×”×¨××©×™

### Phase 2: ×“×£ ×¤×¨×˜×™× ×‘×¡×™×¡×™ (2-3 ×™××™×)
1. Backend: endpoint ××™×¨×•×¢×™×
2. Frontend: CrosswalkDetailsPage
3. ×¨×©×™××ª ××™×¨×•×¢×™× ×¤×©×•×˜×”

### Phase 3: ×¡×™× ×•×Ÿ ×•××™×•×Ÿ (2-3 ×™××™×)
1. Backend: ×œ×•×’×™×§×ª ×¡×™× ×•×Ÿ
2. Frontend: FilterBar + DateRangePicker
3. ××™× ×˜×’×¨×¦×™×”

### Phase 4: ×©×™×¤×•×¨×™× ×•-Polish (1-2 ×™××™×)
1. Pagination
2. Loading states
3. Empty states
4. ×‘×“×™×§×•×ª

---

## ğŸ“ ×”×¢×¨×•×ª ×—×©×•×‘×•×ª

### ××‘×˜×—×”
- Validate ×›×œ input ××”××©×ª××©
- Sanitize search queries
- Rate limiting ×œ×—×™×¤×•×© (max 100 requests/minute)
- CORS configuration

### SEO (×¢×ª×™×“×™)
- Meta tags ×œ×›×œ ××¢×‘×¨ ×—×¦×™×™×”
- URL structure ×™×“×™×“×•×ª×™
- Sitemap generation

### Analytics (×¢×ª×™×“×™)
- Track search queries
- Track most viewed crosswalks
- Track filter usage

---

## ğŸš€ ×“×•×’×××•×ª ×§×•×“

### SearchBar Component
```jsx
import { useState, useEffect, useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { useSearch } from '../hooks';

export function SearchBar() {
  const navigate = useNavigate();
  const { query, setQuery, results, loading } = useSearch();
  const [showDropdown, setShowDropdown] = useState(false);
  const inputRef = useRef(null);
  
  const handleSelect = (crosswalk) => {
    navigate(`/crosswalks/${crosswalk._id}`);
    setShowDropdown(false);
    setQuery('');
  };
  
  return (
    <div className="relative">
      <input
        ref={inputRef}
        type="text"
        value={query}
        onChange={(e) => {
          setQuery(e.target.value);
          setShowDropdown(true);
        }}
        placeholder="Search crosswalks by street, city..."
        className="w-full px-4 py-3 border rounded-lg"
      />
      
      {showDropdown && results.length > 0 && (
        <div className="absolute w-full mt-2 bg-white shadow-lg rounded-lg">
          {results.map((result) => (
            <div
              key={result._id}
              onClick={() => handleSelect(result)}
              className="px-4 py-3 hover:bg-gray-100 cursor-pointer"
            >
              ğŸš¦ {result.location.street} {result.location.number}, {result.location.city}
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
```

---

## ğŸ“š ×¡×™×›×•×

××¡××š ×–×” ××¤×¨×˜ ××¢×¨×›×ª ×—×™×¤×•×© ×•×¡×™× ×•×Ÿ ××§×™×¤×” ×œ××¢×¨×›×ª ××¢×‘×¨×™ ×”×—×¦×™×™×”. ×”××¢×¨×›×ª ×›×•×œ×œ×ª:

âœ… ×—×™×¤×•×© ×—×“-×¢×¨×›×™ ×©×œ ××¢×‘×¨×™ ×—×¦×™×™×”
âœ… ×“×£ ×¤×¨×˜×™× ×¢× ×”×™×¡×˜×•×¨×™×” ××œ××”
âœ… ×¡×™× ×•×Ÿ ×œ×¤×™ ×ª××¨×™×š ×•×¨××ª ×¡×›× ×”
âœ… ××™×•×Ÿ ×’××™×©
âœ… Pagination ×œ×¨×©×™××•×ª ××¨×•×›×•×ª
âœ… UX ××ª×§×“× ×¢× auto-complete

**×”×¢×¨×›×ª ×–××Ÿ:** 8-12 ×™××™ ×¢×‘×•×“×”
**××•×¨×›×‘×•×ª:** ×‘×™× ×•× ×™×ª-×’×‘×•×”×”
**×¢×¨×š ×¢×¡×§×™:** ×’×‘×•×” ×××•×“

---

**××•×›×Ÿ ×œ×™×™×©×•×!** ğŸš€
